<html leng="ar" dir="rtl">
    <head>
        <meta name="description" content="Ø§Ø³ØªÙ…Ø¹ Ø¥Ù„Ù‰ Ø§Ù„ÙƒØªØ¨ Ø§Ù„ØµÙˆØªÙŠØ© Ø¨Ø§Ù„Ù„ØºØ© Ø§Ù„ÙØ±Ù†Ø³ÙŠØ© Ø¨Ø¬ÙˆØ¯Ø© Ø¹Ø§Ù„ÙŠØ©.">
        <meta name="keywords" content="ÙƒØªØ¨ ØµÙˆØªÙŠØ©, Ù‚Ø±Ø§Ø¡Ø©, Ø§Ø³ØªÙ…Ø§Ø¹, ÙØ±Ù†Ø³ÙŠ, Ù…ÙˆÙ‚Ø¹ ÙƒØªØ¨">
        <meta name="author" content="Ø§Ø³Ù… Ù…ÙˆÙ‚Ø¹Ùƒ">
        <title>Ù…ÙˆÙ‚Ø¹ Ø§Ù„ÙƒØªØ¨ Ø§Ù„ØµÙˆØª _Ø§Ø³ØªÙ…Ø¹ Ù„Ø£ÙØ¶Ù„ Ø§Ù„ÙƒØªØ¨</title>
        <title>Lire des livres voix haute
        </title>
        
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" href="stle ra.css">
        <script src="https://code.responsivevoice.org/responsivevoice.js?key=Bvt1lQNu"></script>
   

    </head>
    <body>
        
   
    <div class="container">
            
        <h1>Ù‚Ø±Ø§Ø¡Ø© Ø§Ù„ÙƒØªØ§Ø¨ Ø¨Ø§Ù„ØµÙˆØª</h1>
        <input type="file" id="fileInput" accept=".txt, .pdf">
        <br><br>
        <textarea id="textInput"  readonly ></textarea>
        <br>
        <button onclick="startReading()">Ø§Ø¨Ø¯Ø£ Ø§Ù„Ù‚Ø±Ø§Ø¡Ø©</button>
        <br>
        <label for="speed">Ø³Ø±Ø¹Ø© Ø§Ù„Ù‚Ø±Ø§Ø¡Ø©:</label>
        <select id="speed">
            <option value="0.5">Ø¨Ø·ÙŠØ¡</option>
            <option value="1.0" selected>Ø¹Ø§Ø¯ÙŠ</option>
            <option value="1.5">Ø³Ø±ÙŠØ¹</option>
        </select>
        <p id="errorLog"></p>
        
    </div>


    
        <script>
            let lines = [];
            let currentIndex = 0;
            const LINES_PER_BATCH = 20; // ÙŠÙ‚Ø±Ø£ 20 Ø³Ø·Ø± ÙÙŠ ÙƒÙ„ Ù…Ø±Ø©
            esponsiveVoice.speak("Ø§Ù„Ù†Øµ Ø§Ù„Ø°ÙŠ ØªØ±ÙŠØ¯ Ù‚Ø±Ø§Ø¡ØªÙ‡", "Arabic Male", {rate: 1.0});
            responsiveVoice.speak("Ù‡Ø°Ù‡ Ù‡ÙŠ Ø§Ù„Ù‚Ø±Ø§Ø¡Ø© Ù…Ø¹ Ø³Ø±Ø¹Ø© Ù…Ù†Ø®ÙØ¶Ø©", "Arabic Male", {rate: 0.5}); // Ø³Ø±Ø¹Ø© Ø¨Ø·ÙŠØ¦Ø©
            responsiveVoice.speak("Ù‡Ø°Ù‡ Ù‡ÙŠ Ø§Ù„Ù‚Ø±Ø§Ø¡Ø© Ù…Ø¹ Ø³Ø±Ø¹Ø© Ø·Ø¨ÙŠØ¹ÙŠØ©", "Arabic Male", {rate: 1.0}); // Ø³Ø±Ø¹Ø© Ø¹Ø§Ø¯ÙŠØ©
            responsiveVoice.speak("Ù‡Ø°Ù‡ Ù‡ÙŠ Ø§Ù„Ù‚Ø±Ø§Ø¡Ø© Ù…Ø¹ Ø³Ø±Ø¹Ø© Ø¹Ø§Ù„ÙŠØ©", "Arabic Male", {rate: 1.5}); // Ø³Ø±Ø¹Ø© Ø³Ø±ÙŠØ¹Ø©
    
    
            document.getElementById("fileInput").addEventListener("change", function(event) {
                const file = event.target.files[0];
                if (file) {
                    const fileType = file.name.split('.').pop().toLowerCase();
                    if (fileType === "txt") {
                        readTextFile(file);
                    } else if (fileType === "pdf") {
                        readPDFFile(file);
                    } else {
                        showError("âš ï¸ Ø§Ù„Ù…Ù„Ù ØºÙŠØ± Ù…Ø¯Ø¹ÙˆÙ…! Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø§Ø®ØªÙŠØ§Ø± Ù…Ù„Ù TXT Ø£Ùˆ PDF.");
                    }
                }
            });
    
            function readTextFile(file) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    processText(e.target.result);
                };
                reader.readAsText(file);
            }
    
            function readPDFFile(file) {
                const reader = new FileReader();
                reader.onload = function(event) {
                    const typedArray = new Uint8Array(event.target.result);
                    pdfjsLib.getDocument(typedArray).promise.then(pdf => {
                        let text = "";
                        let promises = [];
                        for (let i = 1; i <= pdf.numPages; i++) {
                            promises.push(
                                pdf.getPage(i).then(page => {
                                    return page.getTextContent().then(content => {
                                        let pageText = content.items.map(item => item.str).join(" ").trim();
                                        if (pageText.length > 0) {
                                            text += pageText + "\n";
                                        }
                                    });
                                })
                            );
                        }
                        Promise.all(promises).then(() => processText(text));
                    }).catch(() => showError("âš ï¸ Ø®Ø·Ø£ ÙÙŠ Ù‚Ø±Ø§Ø¡Ø© Ù…Ù„Ù PDF!"));
                };
                reader.readAsArrayBuffer(file);
            }
    
            function processText(text) {
                lines = text.split("\n").map(line => line.trim());
                currentIndex = 0;
                document.getElementById("textInput").value = "";
                if (lines.length === 0) {
                    showError("âš ï¸ Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ù†Øµ Ù„Ù„Ù‚Ø±Ø§Ø¡Ø©!");
                } else {
                    startReading();
                }
            }
    
            function startReading() {
                if (currentIndex < lines.length) {
                    const textBatch = lines.slice(currentIndex, currentIndex + LINES_PER_BATCH).join("\n");
                    document.getElementById("textInput").value = textBatch;
                    const speed = parseFloat(document.getElementById("speed").value);
                    speakText(textBatch, speed, () => {
                        currentIndex += LINES_PER_BATCH;
                        setTimeout(startReading, 3000); // Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„ ØªÙ„Ù‚Ø§Ø¦ÙŠÙ‹Ø§ Ø¨Ø¹Ø¯ Ø§Ù†ØªÙ‡Ø§Ø¡ Ø§Ù„Ù‚Ø±Ø§Ø¡Ø©
                    });
                } else {
                    alert("ğŸ‰ ØªÙ…Øª Ù‚Ø±Ø§Ø¡Ø© Ø§Ù„ÙƒØªØ§Ø¨ Ø¨Ø§Ù„ÙƒØ§Ù…Ù„!");
                }
            }
    
            function speakText(text, speed, callback) {
                responsiveVoice.speak(text, "Arabic Male", {rate: speed});
                callback();
            }
    
            function showError(message) {
                document.getElementById("errorLog").textContent = message;
            }
            
    
        </script>
                        
    </body>





</html>